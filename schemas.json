{
  "schemas": {
    "version": "1.0.0",
    "form": {
      "configure": {
        "options": {
          "angular": {
            "schema": [
              "autoDetect",
              "port",
              "interval",
              {
                "key": "components",
                "add": "New",
                "style": {
                  "add": "btn-success"
                },
                "items": [
                  "components[].name",
                  "components[].action",
                  {
                    "key": "components[].pin",
                    "condition": "model.components[arrayIndex].action=='digitalRead' || model.components[arrayIndex].action=='digitalWrite' || model.components[arrayIndex].action=='analogRead' || model.components[arrayIndex].action=='analogWrite' || model.components[arrayIndex].action=='servo' || model.components[arrayIndex].action=='esc'"
                  },
                  {
                    "key": "components[].address",
                    "condition": "model.components[arrayIndex].action=='oled-i2c' || model.components[arrayIndex].action=='LCD-PCF8574A' || model.components[arrayIndex].action=='LCD-JHD1313M1' || model.components[arrayIndex].action=='PCA9685-Servo'"
                  }
                ]
              },
              {
                "type": "submit",
                "style": "btn-info",
                "title": "OK"
              }
            ]
          }
        }
      }
    },
    "configure": {
      "my-default-config": {
        "title": "Default Configuration",
        "type": "object",
        "properties": {
          "options": {
            "type": "object",
            "title": "Component",
            "required": [
              "components"
            ],
            "properties": {
              "autoDetect": {
                "title": "Auto Detect Port?",
                "type": "boolean",
                "default": true
              },
              "port": {
                "title": "Serial Port",
                "type": "string",
                "description": "The serial port your board is on",
                "required": false,
                "default": "/dev/ttyACM0"
              },
              "interval": {
                "title": "Sensor Read Interval (ms)",
                "type": "string",
                "enum": [
                  "500",
                  "1000",
                  "1500",
                  "2000",
                  "200"
                ],
                "description": "The Interval in milliseconds to send Sensor readings.",
                "required": false,
                "default": "500"
              },
              "components": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "title": "Name",
                      "type": "string",
                      "description": "Name this component anything you like. (i.e Left_Motor). Sensor output will show up under this name in payload",
                      "required": true
                    },
                    "action": {
                      "title": "Action",
                      "type": "string",
                      "enum": [
                        "digitalWrite",
                        "digitalRead",
                        "analogWrite",
                        "analogRead",
                        "servo",
                        "servo-continuous",
                        "PCA9685-Servo",
                        "oled-i2c",
                        "LCD-PCF8574A",
                        "LCD-JHD1313M1",
                        "MPU6050",
                        "esc"
                      ],
                      "required": true
                    },
                    "pin": {
                      "title": "Pin",
                      "type": "string",
                      "description": "Pin used for this component",
                      "required": false
                    },
                    "address": {
                      "title": "address",
                      "type": "string",
                      "description": "i2c address used for this component",
                      "required": false
                    }
                  },
                  "required": [
                    "name",
                    "action"
                  ]
                }
              }
            }
          }
        }
      }
    },
    "message": {
      "digitalWrite": {
        "title": "Digital Write",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "state": {
            "type": "string",
            "enum": [
              "1",
              "0"
            ]
          }
        }
      },
      "analogWrite": {
        "title": "Analog Write",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "value": {
            "type": "number"
          }
        }
      },
      "servo": {
        "title": "Servo",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "servo_action": {
            "title": "Function",
            "type": "string",
            "enum": [
              "to",
              "sweep",
              "stop"
            ]
          },
          "sweep": {
            "title": "Sweep",
            "type": "object",
            "properties": {
              "min": {
                "type": "number"
              },
              "max": {
                "type": "number"
              }
            },
            "x-schema-form": {
              "condition": "model.servo_action == 'sweep'"
            }
          },
          "to_value": {
            "title": "To",
            "description": "An angle value 0 - 180",
            "type": "number",
            "x-schema-form": {
              "condition": "model.servo_action == 'to'"
            }
          }
        }
      },
      "servo-continuous": {
        "title": "Continuous Servo",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "direction": {
            "title": "Direction",
            "type": "string",
            "enum": [
              "CW",
              "CCW",
              "STOP"
            ]
          }
        }
      },
      "LCD-PCF8574A": {
        "title": "LCD-PCF8574A",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "text": {
            "type": "string"
          }
        }
      },
      "LCD-JHD1313M1": {
        "title": "LCD-JHD1313M1",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "text": {
            "type": "string"
          }
        }
      },
      "oled-i2c": {
        "title": "OLED",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "text": {
            "type": "string"
          }
        }
      },
      "esc": {
        "title": "ESC",
        "type": "object",
        "properties": {
          "component": {
            "title": "Component Name",
            "type": "string"
          },
          "speed": {
            "type": "number"
          }
        }
      }
    }
  }
}
